(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[2583],{92062:function(N){N.exports={wraper:"wraper___1cKnG"}},28524:function(N,O,t){"use strict";var v=t(92062),r=t.n(v),l=t(85893),i="cpPz",X=function(B){return(0,l.jsx)("div",{className:r().wraper,_nk:"".concat(i,"11"),children:B.children})};O.Z=X},81914:function(N,O,t){"use strict";t.r(O),t.d(O,{default:function(){return Y}});var v=t(39428),r=t(66456),l=t(64411),i=t(3182),X=t(34792),_=t(48086),B=t(57663),x=t(71577),R=t(71194),F=t(50146),b=t(2824),ne=t(47673),D=t(4107),m=t(67294),E=t(57119),S=t(69955),W=t(28524),L=t(43581),U=t(43358),y=t(34041),K=t(9715),Z=t(55843),C=t(28487),c=t(30896),u=t(85893),d="R9o4",A=function(g){var M=Z.Z.useForm(),n=(0,b.Z)(M,1),s=n[0],o=g.isModalOpen,e=g.handleCancel,p=g.subjectInfoId,h=g.type,J=g.subject_subsection,Q=g.callBack,H=g.subjectInfo_type,se=(0,m.useState)(0),q=(0,b.Z)(se,2),V=q[0],ee=q[1];(0,m.useMemo)(function(){h==c.L.\u7F16\u8F91&&s.setFieldsValue(J),H==c.fH.\u89C6\u9891\u5C0F\u8282?ee(c.gf.\u4EC5\u89C6\u9891):ee(c.gf["\u89C6\u9891+sb3\u6587\u4EF6"])},[J,h]);var ue=function(){s.validateFields().then(function(f){f.subject_info_id=p,f.status=1,console.log(f),h==c.L.\u6DFB\u52A0?(0,S.St)(f).then(function(j){j.code==200?(_.default.success("\u8BFE\u65F6\u5C0F\u8282\u6DFB\u52A0\u6210\u529F"),e(),Q()):_.default.error("\u8BFE\u65F6\u5C0F\u8282\u6DFB\u52A0\u5931\u8D25")}).catch(function(j){return console.log(j.message)}):h==c.L.\u7F16\u8F91?(f.id=J.id,(0,S.Zg)(f).then(function(j){j.code==200?(_.default.success("\u8BFE\u65F6\u5C0F\u8282\u4FEE\u6539\u6210\u529F"),e(),Q()):_.default.error("\u8BFE\u65F6\u5C0F\u8282\u4FEE\u6539\u5931\u8D25")}).catch(function(j){return console.log(j.message)})):(f.status=2,(0,S.Zg)(f).then(function(j){j.code==200?(_.default.success("\u8BFE\u65F6\u5C0F\u8282\u5220\u9664\u6210\u529F"),e(),Q()):_.default.error("\u8BFE\u65F6\u5C0F\u8282\u5220\u9664\u5931\u8D25")}).catch(function(j){return console.log(j.message)}))})};return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(F.Z,{title:h===c.L.\u7F16\u8F91?"\u7F16\u8F91\u8BFE\u65F6\u5C0F\u8282":"\u6DFB\u52A0\u8BFE\u65F6\u5C0F\u8282",open:o,onOk:ue,onCancel:e,_nk:"".concat(d,"11"),children:(0,u.jsxs)(Z.Z,{form:s,labelCol:{span:5},wrapperCol:{span:19},style:{maxWidth:600},_nk:"".concat(d,"21"),children:[(0,u.jsx)(Z.Z.Item,{label:"\u5C0F\u8282\u540D\u79F0",name:"name",rules:[{required:h==c.L.\u6DFB\u52A0,message:"\u8BF7\u8F93\u5165\u8BFE\u7A0B\u540D\u79F0!"}],style:{marginBottom:24},_nk:"".concat(d,"31"),children:(0,u.jsx)(D.Z,{_nk:"".concat(d,"41")})}),(0,u.jsx)(Z.Z.Item,{label:"\u4E0A\u4F20\u7C7B\u578B",name:"type",style:{marginBottom:24},_nk:"".concat(d,"32"),children:(0,u.jsxs)(y.Z,{style:{width:220},onChange:function(f){return ee(f)},defaultValue:H==c.fH.\u89C6\u9891\u5C0F\u8282?c.gf.\u4EC5\u89C6\u9891:c.gf["\u89C6\u9891+sb3\u6587\u4EF6"],_nk:"".concat(d,"51"),children:[H!==c.fH.\u89C6\u9891\u5C0F\u8282&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(y.Z.Option,{value:c.gf["\u89C6\u9891+sb3\u6587\u4EF6"],_nk:"".concat(d,"33"),children:"\u89C6\u9891+sb3\u6587\u4EF6"}),(0,u.jsx)(y.Z.Option,{value:c.gf.\u4EC5sb3,_nk:"".concat(d,"34"),children:"\u4EC5sb3"}),(0,u.jsx)(y.Z.Option,{value:c.gf.\u4EC5\u89C6\u9891,_nk:"".concat(d,"35"),children:"\u4EC5\u89C6\u9891"})]}),H==c.fH.\u89C6\u9891\u5C0F\u8282&&(0,u.jsx)(y.Z.Option,{value:c.gf.\u4EC5\u89C6\u9891,_nk:"".concat(d,"36"),children:"\u4EC5\u89C6\u9891"})]})}),(V===c.gf["\u89C6\u9891+sb3\u6587\u4EF6"]||V===c.gf.\u4EC5\u89C6\u9891)&&(0,u.jsx)(Z.Z.Item,{label:"\u89C6\u9891\u4E0A\u4F20",name:"video_url",rules:[{required:h==c.L.\u6DFB\u52A0,message:"\u8BF7\u4E0A\u4F20\u89C6\u9891\u6587\u4EF6\uFF01!"}],style:{marginBottom:24},_nk:"".concat(d,"37"),children:(0,u.jsx)(C.Z,{type:"video",uploadPath:"video/subjectInfoId"+p,callBack:function(f){return s.setFieldValue("video_url",f)},_nk:"".concat(d,"61")})}),(V===c.gf["\u89C6\u9891+sb3\u6587\u4EF6"]||V===c.gf.\u4EC5sb3)&&(0,u.jsx)(Z.Z.Item,{label:"sb3\u6587\u4EF6\u4E0A\u4F20",name:"file_url",rules:[{required:h==c.L.\u6DFB\u52A0,message:"\u8BF7\u4E0A\u4F20sb3\u6587\u4EF6\uFF01"}],style:{marginBottom:24},_nk:"".concat(d,"38"),children:(0,u.jsx)(C.Z,{type:"sb3",uploadPath:"sb3/subjectInfoId"+p,callBack:function(f){return s.setFieldValue("file_url",f)},_nk:"".concat(d,"62")})})]})})})},T=A,a="Uz5K",$=D.Z.Search,G=function(g){var M=g.location,n=M.state,s=n.subjectInfoId,o=n.subjectInfoType,e=(0,L.md)();console.log("subjectInfoId",s);var p=(0,m.useState)([]),h=(0,b.Z)(p,2),J=h[0],Q=h[1],H=(0,m.useState)(""),se=(0,b.Z)(H,2),q=se[0],V=se[1],ee=(0,m.useState)(!1),ue=(0,b.Z)(ee,2),te=ue[0],f=ue[1],j=(0,m.useState)(c.L.\u6DFB\u52A0),ce=(0,b.Z)(j,2),fe=ce[0],le=ce[1],me=(0,m.useState)({}),ie=(0,b.Z)(me,2),pe=ie[0],he=ie[1],_e=[{title:"\u5E8F\u53F7",dataIndex:"num",key:"num",width:"5%",render:function(I,z,P){return parseInt(P+1)}},{title:"\u5C0F\u8282\u540D\u79F0",dataIndex:"name",key:"name",width:"15%"},{title:"\u89C6\u9891",dataIndex:"video_url",key:"video_url",width:"30%",render:function(I,z,P){return(0,u.jsx)(x.Z,{type:"dashed",onClick:function(){F.Z.confirm({icon:(0,u.jsx)(u.Fragment,{}),width:"864px",title:"\u67E5\u770B\u89C6\u9891",content:(0,u.jsx)("video",{src:I,style:{width:800,height:600,margin:"0 auto"},autoPlay:!0,controls:!0,_nk:"".concat(a,"21")})})},_nk:"".concat(a,"11"),children:"\u67E5\u770B\u89C6\u9891"})}},{title:"sb3\u6587\u4EF6\u5730\u5740",dataIndex:"file_url",key:"file_url",width:"30%"},{title:"\u64CD\u4F5C",dataIndex:"id",key:"id",width:"20%",render:function(I,z,P){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(x.Z,{type:"dashed",onClick:function(){he(z),le(c.L.\u7F16\u8F91),f(!0)},hidden:!e.hasPerms("system:subject_subsection:edit"),_nk:"".concat(a,"12"),children:"\u7F16\u8F91\u5C0F\u8282"}),"\xA0\xA0\xA0\xA0",(0,u.jsx)(x.Z,{type:"dashed",onClick:function(){F.Z.confirm({icon:(0,u.jsx)(E.Z,{_nk:"".concat(a,"31")}),title:"\u5220\u9664\u5C0F\u8282",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u5C0F\u8282\uFF1A'"+z.name+"'?",onOk:function(je){(0,S.fW)(z.id).then(function(oe){oe.code==200?(_.default.success("\u8BFE\u65F6\u5C0F\u8282\u5220\u9664\u6210\u529F"),ae(),je()):_.default.error("\u8BFE\u65F6\u5C0F\u8282\u5220\u9664\u5931\u8D25")}).catch(function(oe){return console.log(oe.message)})},onCancel:function(){}})},hidden:!e.hasPerms("system:subject_subsection:delete"),_nk:"".concat(a,"13"),children:"\u5220\u9664\u5C0F\u8282"}),"\xA0\xA0\xA0\xA0"]})}}];(0,m.useEffect)(function(){ae()},[s,q]);function ae(){return re.apply(this,arguments)}function re(){return re=(0,i.Z)((0,v.Z)().mark(function w(){var I;return(0,v.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,S.qx)(s,q);case 2:I=P.sent,console.log("res",I),Q(I.data);case 5:case"end":return P.stop()}},w)})),re.apply(this,arguments)}var be=function(I){return V(I)};return(0,u.jsxs)(W.Z,{_nk:"".concat(a,"41"),children:[(0,u.jsxs)("div",{style:{width:"100%",float:"right"},_nk:"".concat(a,"51"),children:[(0,u.jsxs)("p",{_nk:"".concat(a,"61"),children:[(0,u.jsx)($,{placeholder:"\u8BF7\u8F93\u5165\u5C0F\u8282\u540D\u79F0",allowClear:!0,enterButton:"\u641C\u7D22",onSearch:be,style:{width:300},_nk:"".concat(a,"71")}),"\xA0\xA0\xA0\xA0",(0,u.jsx)(x.Z,{type:"primary",onClick:function(){le(c.L.\u6DFB\u52A0),f(!0)},hidden:!e.hasPerms("system:subject_subsection:add"),_nk:"".concat(a,"14"),children:"\u6DFB\u52A0\u5C0F\u8282"})]}),(0,u.jsx)(l.Z,{columns:_e,dataSource:J,pagination:!1,_nk:"".concat(a,"81")})]}),te&&(0,u.jsx)(T,{subjectInfoId:s,isModalOpen:!0,type:fe,subjectInfo_type:o,subject_subsection:pe,handleCancel:function(){return f(!1)},callBack:ae,_nk:"".concat(a,"91")})]})},Y=G},28487:function(N,O,t){"use strict";var v=t(11849),r=t(43185),l=t(93009),i=t(57663),X=t(71577),_=t(86582),B=t(34792),x=t(48086),R=t(2824),F=t(67294),b=t(84391),ne=t(69955),D=t(30896),m=t(85893),E="0Ygb",S=function(L){var U=L.type,y=L.callBack,K=L.uploadPath,Z=(0,F.useState)([]),C=(0,R.Z)(Z,2),c=C[0],u=C[1],d=D.Dq[U],A={multiple:!1,accept:d,fileList:c,maxCount:1,onChange:function(a){console.log("onChange",a),a.file.status!=="uploading"&&console.log(a.file,a.fileList),a.file.status==="done"?console.log("".concat(a.file.name," \u6587\u4EF6\u4E0A\u4F20\u6210\u529F")):a.file.status==="error"&&x.default.error("".concat(a.file.name," \u6587\u4EF6\u4E0A\u4F20\u5931\u8D25")),u((0,_.Z)(a.fileList))},onStart:function(a){console.log("onStart",a,a.name)},onError:function(a){console.log("onError",a)},customRequest:function(a){var $=a.file,G=a.filename,Y=a.onError,k=a.onProgress,g=a.onSuccess,M=a.withCredentials,n=new FormData;return n.append("file",$),n.append("type",K),(0,ne.t4)(n,{onReqProgress:function(o){console.log("onReqProgress",Math.round(o.loaded/o.total*100).toFixed(2)),k({percent:Math.round(o.loaded/o.total*100).toFixed(2)},$)}}).then(function(s){setTimeout(function(){g()}),s.code==200&&s.url!==""&&y&&y(s.url)}).catch(Y),{abort:function(){console.log("upload progress is aborted.")}}}};return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(l.Z,(0,v.Z)((0,v.Z)({},A),{},{_nk:"".concat(E,"11"),children:(0,m.jsx)(X.Z,{icon:(0,m.jsx)(b.Z,{_nk:"".concat(E,"31")}),_nk:"".concat(E,"21"),children:"\u9009\u62E9\u6587\u4EF6"})}))})};O.Z=S},69955:function(N,O,t){"use strict";t.d(O,{Xi:function(){return _},oc:function(){return x},lt:function(){return F},h1:function(){return ne},t4:function(){return m},oG:function(){return S},$h:function(){return L},Pl:function(){return y},sn:function(){return Z},TE:function(){return c},qx:function(){return d},St:function(){return T},Zg:function(){return $},fW:function(){return Y},bO:function(){return g}});var v=t(11849),r=t(39428),l=t(3182),i=t(86072),X="+rss";function _(n){return B.apply(this,arguments)}function B(){return B=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/list",{method:"POST",data:{id:s}}));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function x(n,s){return R.apply(this,arguments)}function R(){return R=(0,l.Z)((0,r.Z)().mark(function n(s,o){return(0,r.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,i.Z)("/system/subject/info_list",{method:"POST",data:{id:s,keyWord:o||""}}));case 1:case"end":return p.stop()}},n)})),R.apply(this,arguments)}function F(n){return b.apply(this,arguments)}function b(){return b=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/info/"+s,{method:"POST"}));case 1:case"end":return e.stop()}},n)})),b.apply(this,arguments)}function ne(){return D.apply(this,arguments)}function D(){return D=(0,l.Z)((0,r.Z)().mark(function n(){return(0,r.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,i.Z)("/system/subject/type_list",{method:"GET"}));case 1:case"end":return o.stop()}},n)})),D.apply(this,arguments)}function m(n){return E.apply(this,arguments)}function E(){return E=(0,l.Z)((0,r.Z)().mark(function n(s){var o,e=arguments;return(0,r.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return o=e.length>1&&e[1]!==void 0?e[1]:{},h.abrupt("return",(0,i.Z)("/system/user/profile/subject_upload",(0,v.Z)({method:"post",data:s},o)));case 2:case"end":return h.stop()}},n)})),E.apply(this,arguments)}function S(n){return W.apply(this,arguments)}function W(){return W=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/add",{method:"post",data:s}));case 1:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function L(n){return U.apply(this,arguments)}function U(){return U=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/edit",{method:"post",data:s}));case 1:case"end":return e.stop()}},n)})),U.apply(this,arguments)}function y(n){return K.apply(this,arguments)}function K(){return K=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/delete/"+s,{method:"post"}));case 1:case"end":return e.stop()}},n)})),K.apply(this,arguments)}function Z(n){return C.apply(this,arguments)}function C(){return C=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/subject_info/add",{method:"post",data:s}));case 1:case"end":return e.stop()}},n)})),C.apply(this,arguments)}function c(n){return u.apply(this,arguments)}function u(){return u=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/subject_info/edit",{method:"post",data:s}));case 1:case"end":return e.stop()}},n)})),u.apply(this,arguments)}function d(n,s){return A.apply(this,arguments)}function A(){return A=(0,l.Z)((0,r.Z)().mark(function n(s,o){return(0,r.Z)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,i.Z)("/system/subject/subsection/list",{method:"POST",data:{id:s,keyWord:o||""}}));case 1:case"end":return p.stop()}},n)})),A.apply(this,arguments)}function T(n){return a.apply(this,arguments)}function a(){return a=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/subsection/add",{method:"post",data:s}));case 1:case"end":return e.stop()}},n)})),a.apply(this,arguments)}function $(n){return G.apply(this,arguments)}function G(){return G=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/subsection/edit",{method:"post",data:s}));case 1:case"end":return e.stop()}},n)})),G.apply(this,arguments)}function Y(n){return k.apply(this,arguments)}function k(){return k=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/subsection/delete/"+s,{method:"post"}));case 1:case"end":return e.stop()}},n)})),k.apply(this,arguments)}function g(n){return M.apply(this,arguments)}function M(){return M=(0,l.Z)((0,r.Z)().mark(function n(s){return(0,r.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.Z)("/system/subject/subject_info/delete/"+s,{method:"post"}));case 1:case"end":return e.stop()}},n)})),M.apply(this,arguments)}}}]);
