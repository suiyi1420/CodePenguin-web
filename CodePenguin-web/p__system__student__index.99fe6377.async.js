(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8670,8366],{55650:function(T){T.exports={page:"page___33233",context:"context___1N9C0",list:"list___2zuwy",list_box:"list_box___3ZzK2",list_box_context_box:"list_box_context_box___1E_nO",list_box_title:"list_box_title___1PWBa",list_box_context:"list_box_context___-M3Hz",list_box_active:"list_box_active___bEFkj",subject_list:"subject_list___fosuC"}},10554:function(T,L,e){"use strict";e.r(L),e.d(L,{default:function(){return st}});var i=e(39428),wt=e(66456),D=e(64411),Ct=e(88983),E=e(47933),h=e(3182),Bt=e(57663),S=e(71577),d=e(2824),c=e(67294),J=e(55650),b=e.n(J),g=e(86072),Tt="r2Oe";function X(p,f){return m.apply(this,arguments)}function m(){return m=(0,h.Z)((0,i.Z)().mark(function p(f,l){return(0,i.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,g.Z)("/system/subject/user_subject_list?userId="+f+"&subjectTypeId="+l,{method:"GET"}));case 1:case"end":return o.stop()}},p)})),m.apply(this,arguments)}function Y(p,f){return x.apply(this,arguments)}function x(){return x=(0,h.Z)((0,i.Z)().mark(function p(f,l){return(0,i.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,g.Z)("/system/subject/user_subject_info_list?subjectId="+f+"&userId="+l,{method:"GET"}));case 1:case"end":return o.stop()}},p)})),x.apply(this,arguments)}function q(p){return Z.apply(this,arguments)}function Z(){return Z=(0,h.Z)((0,i.Z)().mark(function p(f){return(0,i.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,g.Z)("/system/subject/user_subject?userId="+f,{method:"GET"}));case 1:case"end":return v.stop()}},p)})),Z.apply(this,arguments)}var j=e(30896),tt=e(43581),et=e(33297),A=e(60923),a=e(85893),r="8AQb",nt=function(){var f=(0,tt.tT)("@@initialState"),l=f.initialState,v=localStorage.getItem("access_token"),o=(0,c.useState)(l==null?void 0:l.userConfig["stratch-web"]),F=(0,d.Z)(o,2),at=F[0],Lt=F[1],ut=(0,c.useState)([]),M=(0,d.Z)(ut,2),z=M[0],rt=M[1],it=(0,c.useState)(0),O=(0,d.Z)(it,2),_=O[0],N=O[1],ct=(0,c.useState)([]),$=(0,d.Z)(ct,2),G=$[0],lt=$[1],ot=(0,c.useState)(0),H=(0,d.Z)(ot,2),I=H[0],U=H[1],dt=(0,c.useState)([]),P=(0,d.Z)(dt,2),pt=P[0],ft=P[1],vt=(0,c.useState)(""),W=(0,d.Z)(vt,2),jt=W[0],yt=W[1],ht=(0,c.useState)(!1),V=(0,d.Z)(ht,2),K=V[0],Q=V[1],bt=(0,c.useState)(j.vz.video),R=(0,d.Z)(bt,2),St=R[0],gt=R[1],mt=[{title:"\u5E8F\u53F7",dataIndex:"num",key:"num",width:"5%",render:function(t,u,n){return parseInt(n+1)}},{title:"\u8BFE\u7A0B\u540D\u79F0",dataIndex:"name",key:"name",width:"15%"},{title:"\u8BFE\u65F6\u5185\u5BB9",dataIndex:"context",key:"context",width:"35%"},{title:"\u77E5\u8BC6\u70B9",dataIndex:"knowledge",key:"knowledge",width:"35%"},{title:"\u64CD\u4F5C",dataIndex:"subject_info_id",key:"subject_info_id",width:"10%",render:function(t,u,n){return(0,a.jsxs)(a.Fragment,{children:[u&&u.type==j.fH.\u8BFE\u7A0B\u89C6\u9891&&(0,a.jsx)(S.Z,{type:"primary",onClick:function(){var y=A.Z.base+"/video_pdf";y=y.replaceAll("//","/"),window.open(window.location.origin+y+"?subjectInfoId="+u.subject_info_id+"&type="+j.vz.video)},_nk:"".concat(r,"11"),children:"\u6311\u6218\u8BFE\u7A0B"}),u&&u.type==j.fH.\u89C6\u9891\u5C0F\u8282&&(0,a.jsx)(S.Z,{type:"primary",onClick:function(){var y=A.Z.base+"/video";y=y.replaceAll("//","/"),window.open(window.location.origin+y+"?subjectInfoId="+u.subject_info_id)},_nk:"".concat(r,"12"),children:"\u6311\u6218\u8BFE\u7A0B"}),u&&u.type==j.fH.\u7F16\u7A0B\u5C0F\u8282&&(0,a.jsx)(S.Z,{type:"primary",onClick:function(){window.open(at+"?subject_info_id="+t+"&access="+v)},_nk:"".concat(r,"13"),children:"\u6311\u6218\u8BFE\u7A0B"}),u&&u.type==j.fH.\u8BFE\u7A0B\u8BFE\u4EF6&&(0,a.jsx)(S.Z,{type:"primary",onClick:function(){gt(j.vz.pdf),yt(u.url),Q(!0)},_nk:"".concat(r,"14"),children:"\u8BFE\u7A0B\u8BFE\u4EF6"})]})}}],xt=function(t){console.log("\u9009\u4E2D\u5206\u7C7B\uFF1A",t.target.value),N(t.target.value)};(0,c.useMemo)(function(){_t()},[_]),(0,c.useMemo)(function(){Zt()},[]),(0,c.useMemo)(function(){It()},[I]);function Zt(){return k.apply(this,arguments)}function k(){return k=(0,h.Z)((0,i.Z)().mark(function s(){var t;return(0,i.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("initialState.currentUser.userId",l.currentUser.userId),n.next=3,q(l.currentUser.userId);case 3:t=n.sent,console.log("res",t),t.data&&t.data.length>0&&(lt(t.data),N(t.data[0].subject_type_id));case 6:case"end":return n.stop()}},s)})),k.apply(this,arguments)}function _t(){return w.apply(this,arguments)}function w(){return w=(0,h.Z)((0,i.Z)().mark(function s(){var t;return(0,i.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(l.currentUser.userId,_);case 2:t=n.sent,console.log("res",t),rt(t.data),t.data&&t.data.length&&U(t.data[0].subject_id);case 6:case"end":return n.stop()}},s)})),w.apply(this,arguments)}function It(){return C.apply(this,arguments)}function C(){return C=(0,h.Z)((0,i.Z)().mark(function s(){var t;return(0,i.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Y(I,l.currentUser.userId);case 2:t=n.sent,console.log("res",t),ft(t.data);case 5:case"end":return n.stop()}},s)})),C.apply(this,arguments)}var kt=function(t){U(t)};return(0,a.jsxs)("div",{className:b().page,style:{width:"100%",float:"right"},_nk:"".concat(r,"21"),children:[(0,a.jsxs)("p",{_nk:"".concat(r,"31"),children:["\u8BFE\u7A0B\u5206\u7C7B\uFF1A",(0,a.jsx)(E.ZP.Group,{onChange:xt,value:_,_nk:"".concat(r,"41"),children:G&&G.map(function(s){return(0,a.jsx)(E.ZP.Button,{value:s.subject_type_id,_nk:"iAr".concat(r,"42"),children:s.subject_type_name})})})]}),(0,a.jsxs)("div",{className:b().context,_nk:"".concat(r,"22"),children:[(0,a.jsx)("div",{className:b().list,_nk:"".concat(r,"23"),children:z&&z.map(function(s){return(0,a.jsx)("div",{className:`
                      `.concat(b().list_box," ").concat(I==s.subject_id?b().list_box_active:"",`
                    `),onClick:function(){kt(s.subject_id)},style:{background:"url("+s.image+") no-repeat center center",backgroundSize:"100% 100%"},_nk:"iAr".concat(r,"24")},s.subject_id)})}),(0,a.jsx)("div",{className:b().subject_list,_nk:"".concat(r,"25"),children:(0,a.jsx)(D.Z,{columns:mt,dataSource:pt,pagination:!1,_nk:"".concat(r,"51")})})]}),K&&(0,a.jsx)(et.default,{type:St,video_url:jt,isModalOpen:K,setIsModalOpen:function(){return Q(!1)},_nk:"".concat(r,"61")})]})},st=nt}}]);
