(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[7350],{92062:function(F){F.exports={wraper:"wraper___1cKnG"}},47407:function(F){F.exports={miniChart:"miniChart___132EF",chartContent:"chartContent___2bnF8",chartLoading:"chartLoading___1MB4M"}},12323:function(F){F.exports={card:"card___Am-TQ",miniChart:"miniChart___QiAb_",chartContent:"chartContent___2BQwg",chartLoading:"chartLoading___2bDkP"}},28524:function(F,T,n){"use strict";var Y=n(92062),E=n.n(Y),b=n(85893),I="cpPz",w=function(_){return(0,b.jsx)("div",{className:E().wraper,_nk:"".concat(I,"11"),children:_.children})};T.Z=w},48655:function(F,T,n){"use strict";n.r(T),n.d(T,{default:function(){return Ot}});var Y=n(13062),E=n(71230),b=n(89032),I=n(15746),w=n(58024),W=n(91894),_=n(66456),pt=n(64411),B=n(2824),S=n(67294),q=n(39428),mt=n(3182),gt=n(86072),oe="4JTU";function xt(){return G.apply(this,arguments)}function G(){return G=(0,mt.Z)((0,q.Z)().mark(function l(){return(0,q.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,gt.Z)("/monitor/cache",{method:"GET"}));case 1:case"end":return c.stop()}},l)})),G.apply(this,arguments)}var yt=n(12323),M=n.n(yt),Ct=n(28524),p=n(63012),P=n(11849),U=n(69610),O=n(54941),K=n(81306),Q=n(6298),e=n(85893),tt="0F+1";function et(l){var r=l.style;r.height="100%";var c=parseInt("".concat(getComputedStyle(l).height),10),t=parseInt("".concat(getComputedStyle(l).paddingTop),10)+parseInt("".concat(getComputedStyle(l).paddingBottom),10);return c-t}function nt(l){if(!l)return 0;var r=l,c=et(r),t=r.parentNode;return t&&(c=et(t)),c}function kt(){return function(l){var r=function(c){(0,K.Z)(i,c);var t=(0,Q.Z)(i);function i(){var d;(0,U.Z)(this,i);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return d=t.call.apply(t,[this].concat(o)),d.state={computedHeight:0},d.root=null,d.handleRoot=function(u){d.root=u},d}return(0,O.Z)(i,[{key:"componentDidMount",value:function(){var a=this.props.height;if(!a&&this.root){var o=nt(this.root);this.setState({computedHeight:o}),o<1&&(o=nt(this.root),this.setState({computedHeight:o}))}}},{key:"render",value:function(){var a=this.props.height,o=this.state.computedHeight,s=a||o;return(0,e.jsx)("div",{ref:this.handleRoot,_nk:"".concat(tt,"11"),children:s>0&&(0,e.jsx)(l,(0,P.Z)((0,P.Z)({},this.props),{},{height:s,_nk:"".concat(tt,"21")}))})}}]),i}(S.Component);return r}}var jt=kt,g="uPPI",at=p.Guide.Arc,St=p.Guide.Html,J=p.Guide.Line,Ft=function(r){switch(r){case"2":return"\u5DEE";case"4":return"\u4E2D";case"6":return"\u826F";case"8":return"\u4F18";default:return""}};p.Shape.registerShape&&p.Shape.registerShape("point","pointer",{drawShape:function(r,c){var t=r.points[0];t=this.parsePoint(t);var i=this.parsePoint({x:0,y:0});return c.addShape("line",{attrs:{x1:i.x,y1:i.y,x2:t.x,y2:t.y,stroke:r.color,lineWidth:2,lineCap:"round"}}),c.addShape("circle",{attrs:{x:i.x,y:i.y,r:6,stroke:r.color,lineWidth:3,fill:"#fff"}})}});var Dt=function(r){var c=r.title,t=r.height,i=t===void 0?1:t,d=r.percent,a=r.forceFit,o=a===void 0?!0:a,s=r.formatter,u=s===void 0?Ft:s,m=r.color,v=m===void 0?"#2F9CFF":m,y=r.bgColor,A=y===void 0?"#F0F2F5":y,D={value:{type:"linear",min:0,max:10,tickCount:6,nice:!0}},Z=[{value:d/10}],H=function(){return`
  <div style="width: 300px;text-align: center;font-size: 12px!important;">
    <div style="font-size: 14px; color: rgba(0,0,0,0.43);margin: 0;">`.concat(c,`</div>
    <div style="font-size: 24px;color: rgba(0,0,0,0.85);margin: 0;">
      `).concat((Z[0].value*10).toFixed(2),`%
    </div>
  </div>`)},h={fontSize:12,fill:"rgba(0, 0, 0, 0.65)",textAlign:"center"};return(0,e.jsxs)(p.Chart,{height:i,data:Z,scale:D,padding:[-16,0,16,0],forceFit:o,_nk:"".concat(g,"11"),children:[(0,e.jsx)(p.Coord,{type:"polar",startAngle:-1.25*Math.PI,endAngle:.25*Math.PI,radius:.8,_nk:"".concat(g,"21")}),(0,e.jsx)(p.Axis,{name:"1",line:void 0,_nk:"".concat(g,"31")}),(0,e.jsx)(p.Axis,{line:void 0,tickLine:void 0,subTickLine:void 0,name:"value",zIndex:2,label:{offset:-12,formatter:u,textStyle:h},_nk:"".concat(g,"32")}),(0,e.jsxs)(p.Guide,{_nk:"".concat(g,"41"),children:[(0,e.jsx)(J,{start:[3,.905],end:[3,.85],lineStyle:{stroke:v,lineDash:void 0,lineWidth:2},_nk:"".concat(g,"51")}),(0,e.jsx)(J,{start:[5,.905],end:[5,.85],lineStyle:{stroke:v,lineDash:void 0,lineWidth:3},_nk:"".concat(g,"52")}),(0,e.jsx)(J,{start:[7,.905],end:[7,.85],lineStyle:{stroke:v,lineDash:void 0,lineWidth:3},_nk:"".concat(g,"53")}),(0,e.jsx)(at,{start:[0,.965],end:[10,.965],style:{stroke:A,lineWidth:10},_nk:"".concat(g,"61")}),(0,e.jsx)(at,{start:[0,.965],end:[Z[0].value,.965],style:{stroke:v,lineWidth:10},_nk:"".concat(g,"62")}),(0,e.jsx)(St,{position:["50%","95%"],html:H(),_nk:"".concat(g,"71")})]}),(0,e.jsx)(p.Geom,{line:!1,type:"point",position:"value*1",shape:"pointer",color:v,active:!1,_nk:"".concat(g,"81")})]})},Zt=jt()(Dt),re=n(48736),Ht=n(27049),ot=n(32059),It=n(63531),At=n(91296),Nt=n.n(At),Lt=n(46618),$t=n.n(Lt),Tt=n(94184),Et=n.n(Tt),rt="3fTd";function it(l){var r=l.style;r.height="100%";var c=parseInt("".concat(getComputedStyle(l).height),10),t=parseInt("".concat(getComputedStyle(l).paddingTop),10)+parseInt("".concat(getComputedStyle(l).paddingBottom),10);return c-t}function ct(l){if(!l)return 0;var r=l,c=it(r),t=r.parentNode;return t&&(c=it(t)),c}function Wt(){return function(l){var r=function(c){(0,K.Z)(i,c);var t=(0,Q.Z)(i);function i(){var d;(0,U.Z)(this,i);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return d=t.call.apply(t,[this].concat(o)),d.state={computedHeight:0},d.root=void 0,d.handleRoot=function(u){d.root=u},d}return(0,O.Z)(i,[{key:"componentDidMount",value:function(){var a=this.props.height;if(!a){var o=ct(this.root);this.setState({computedHeight:o}),o<1&&(o=ct(this.root),this.setState({computedHeight:o}))}}},{key:"render",value:function(){var a=this.props.height,o=this.state.computedHeight,s=a||o;return(0,e.jsx)("div",{ref:this.handleRoot,_nk:"".concat(rt,"11"),children:s>0&&(0,e.jsx)(l,(0,P.Z)((0,P.Z)({},this.props),{},{height:s,_nk:"".concat(rt,"21")}))})}}]),i}(S.Component);return r}}var Bt=Wt,Pt=n(47407),j=n.n(Pt),f="sr2m",zt=function(l){(0,K.Z)(c,l);var r=(0,Q.Z)(c);function c(){var t;(0,U.Z)(this,c);for(var i=arguments.length,d=new Array(i),a=0;a<i;a++)d[a]=arguments[a];return t=r.call.apply(r,[this].concat(d)),t.state={legendData:[],legendBlock:!1},t.requestRef=void 0,t.root=void 0,t.chart=void 0,t.resize=Nt()(function(){var o=t.props.hasLegend,s=t.state.legendBlock;if(!o||!t.root){window.removeEventListener("resize",t.resize);return}t.root&&t.root.parentNode&&t.root.parentNode.clientWidth<=380?s||t.setState({legendBlock:!0}):s&&t.setState({legendBlock:!1})},400),t.getG2Instance=function(o){t.chart=o,requestAnimationFrame(function(){t.getLegendData(),t.resize()})},t.getLegendData=function(){if(!!t.chart){var o=t.chart.getAllGeoms()[0];if(!!o){var s=o.get("dataArray")||[],u=s.map(function(m){var v=m[0]._origin;return v.color=m[0].color,v.checked=!0,v});t.setState({legendData:u})}}},t.handleRoot=function(o){t.root=o},t.handleLegendClick=function(o,s){var u=o;u.checked=!u.checked;var m=t.state.legendData;m[s]=u;var v=m.filter(function(y){return y.checked}).map(function(y){return y.x});t.chart&&t.chart.filter("x",function(y){return v.indexOf("".concat(y))>-1}),t.setState({legendData:m})},t}return(0,O.Z)(c,[{key:"componentDidMount",value:function(){var i=this;window.addEventListener("resize",function(){i.requestRef=requestAnimationFrame(function(){return i.resize()})},{passive:!0})}},{key:"componentDidUpdate",value:function(i){var d=this.props.data;d!==i.data&&this.getLegendData()}},{key:"componentWillUnmount",value:function(){this.requestRef&&window.cancelAnimationFrame(this.requestRef),window.removeEventListener("resize",this.resize),this.resize&&this.resize.cancel()}},{key:"render",value:function(){var i,d=this,a=this.props,o=a.valueFormat,s=a.subTitle,u=a.total,m=a.hasLegend,v=m===void 0?!1:m,y=a.className,A=a.style,D=a.height,Z=D===void 0?0:D,H=a.forceFit,h=H===void 0?!0:H,C=a.percent,V=a.color,N=a.inner,Kt=N===void 0?.75:N,st=a.animate,Qt=st===void 0?!0:st,Jt=a.colors,lt=a.lineWidth,Vt=lt===void 0?1:lt,dt=this.state,Xt=dt.legendData,Yt=dt.legendBlock,bt=Et()(j().pie,y,(i={},(0,ot.Z)(i,j().hasLegend,!!v),(0,ot.Z)(i,j().legendBlock,Yt),i)),X=this.props,wt=X.data,ht=X.selected,_t=ht===void 0?!0:ht,ut=X.tooltip,qt=ut===void 0?!0:ut,z=wt||[],R=_t,L=qt,te=Jt;z=z||[],R=R||!0,L=L||!0;var ft,ee={x:{type:"cat",range:[0,1]},y:{min:0}};(C||C===0)&&(R=!1,L=!1,ft=function($){return $==="\u5360\u6BD4"?V||"rgba(24, 144, 255, 0.85)":"#F0F2F5"},z=[{x:"\u5360\u6BD4",y:parseFloat("".concat(C))},{x:"\u53CD\u6BD4",y:100-parseFloat("".concat(C))}]);var ne=["x*percent",function(k,$){return{name:k,value:"".concat(($*100).toFixed(2),"%")}}],ae=[12,0,12,0],vt=new It.DataView;return vt.source(z).transform({type:"percent",field:"y",dimension:"x",as:"percent"}),(0,e.jsxs)("div",{ref:this.handleRoot,className:bt,style:A,_nk:"".concat(f,"11"),children:[(0,e.jsx)($t(),{maxFontSize:25,_nk:"".concat(f,"21"),children:(0,e.jsxs)("div",{className:j().chart,_nk:"".concat(f,"12"),children:[(0,e.jsxs)(p.Chart,{scale:ee,height:Z,forceFit:h,data:vt,padding:ae,animate:Qt,onGetG2Instance:this.getG2Instance,_nk:"".concat(f,"31"),children:[!!L&&(0,e.jsx)(p.Tooltip,{showTitle:!1,_nk:"".concat(f,"41")}),(0,e.jsx)(p.Coord,{type:"theta",innerRadius:Kt,_nk:"".concat(f,"51")}),(0,e.jsx)(p.Geom,{style:{lineWidth:Vt,stroke:"#fff"},tooltip:L?ne:void 0,type:"intervalStack",position:"percent",color:["x",C||C===0?ft:te],selected:R,_nk:"".concat(f,"61")})]}),(s||u)&&(0,e.jsxs)("div",{className:j().total,_nk:"".concat(f,"13"),children:[s&&(0,e.jsx)("h4",{className:"pie-sub-title",_nk:"".concat(f,"71"),children:s}),u&&(0,e.jsx)("div",{className:"pie-stat",_nk:"".concat(f,"14"),children:typeof u=="function"?u():u})]})]})}),v&&(0,e.jsx)("ul",{className:j().legend,_nk:"".concat(f,"81"),children:Xt.map(function(k,$){return(0,e.jsxs)("li",{onClick:function(){return d.handleLegendClick(k,$)},_nk:"iAr".concat(f,"91"),children:[(0,e.jsx)("span",{className:j().dot,style:{backgroundColor:k.checked?k.color:"#aaa"},_nk:"".concat(f,"a1")}),(0,e.jsx)("span",{className:j().legendTitle,_nk:"".concat(f,"a2"),children:k.x}),(0,e.jsx)(Ht.Z,{type:"vertical",_nk:"".concat(f,"b1")}),(0,e.jsx)("span",{className:j().percent,_nk:"".concat(f,"a3"),children:"".concat((Number.isNaN(k.percent)?0:k.percent*100).toFixed(2),"%")}),(0,e.jsx)("span",{className:j().value,_nk:"".concat(f,"a4"),children:o?o(k.y):k.y})]},k.x)})})]})}}]),c}(S.Component),Rt=Bt()(zt),x="SJqE",Gt=[{title:"col1",dataIndex:"col1",key:"col1"},{title:"col2",dataIndex:"col2",key:"col2"},{title:"col3",dataIndex:"col3",key:"col3"},{title:"col4",dataIndex:"col4",key:"col4"},{title:"col5",dataIndex:"col5",key:"col5"},{title:"col6",dataIndex:"col6",key:"col6"},{title:"col7",dataIndex:"col7",key:"col7"},{title:"col8",dataIndex:"col8",key:"col8"}],Mt=function(r){switch(r){case"10":return"100%";case"8":return"80%";case"6":return"60%";case"4":return"40%";case"2":return"20%";case"0":return"0%";default:return""}},Ut=function(){var r=(0,S.useState)([]),c=(0,B.Z)(r,2),t=c[0],i=c[1],d=(0,S.useState)([]),a=(0,B.Z)(d,2),o=a[0],s=a[1],u=(0,S.useState)([]),m=(0,B.Z)(u,2),v=m[0],y=m[1],A=(0,S.useState)([]),D=(0,B.Z)(A,2),Z=D[0],H=D[1];return(0,S.useEffect)(function(){xt().then(function(h){if(h.code===200){var C=[];C.push({col1:"Redis\u7248\u672C",col2:h.data.info.redis_version,col3:"\u8FD0\u884C\u6A21\u5F0F",col4:h.data.info.redis_mode==="standalone"?"\u5355\u673A":"\u96C6\u7FA4",col5:"\u7AEF\u53E3",col6:h.data.info.tcp_port,col7:"\u5BA2\u6237\u7AEF\u6570",col8:h.data.info.connected_clients}),C.push({col1:"\u8FD0\u884C\u65F6\u95F4(\u5929)",col2:h.data.info.uptime_in_days,col3:"\u4F7F\u7528\u5185\u5B58",col4:h.data.info.used_memory_human,col5:"\u4F7F\u7528CPU",col6:"".concat(h.data.info.used_cpu_user_children,"%"),col7:"\u5185\u5B58\u914D\u7F6E",col8:h.data.info.maxmemory_human}),C.push({col1:"AOF\u662F\u5426\u5F00\u542F",col2:h.data.info.aof_enabled==="0"?"\u5426":"\u662F",col3:"RDB\u662F\u5426\u6210\u529F",col4:h.data.info.rdb_last_bgsave_status,col5:"Key\u6570\u91CF",col6:h.data.dbSize,col7:"\u7F51\u7EDC\u5165\u53E3/\u51FA\u53E3",col8:"".concat(h.data.info.instantaneous_input_kbps,"/").concat(h.data.info.instantaneous_output_kbps,"kps")}),i(C);var V=h.data.commandStats.map(function(N){return{x:N.name,y:Number(N.value)}});H(V),y(h.data.info.used_memory_human),s(h.data.info.used_memory/h.data.info.total_system_memory)}})},[]),(0,e.jsxs)(Ct.Z,{_nk:"".concat(x,"11"),children:[(0,e.jsx)(E.Z,{gutter:[24,24],_nk:"".concat(x,"21"),children:(0,e.jsx)(I.Z,{span:24,_nk:"".concat(x,"31"),children:(0,e.jsx)(W.Z,{title:"\u57FA\u672C\u4FE1\u606F",className:M().card,_nk:"".concat(x,"41"),children:(0,e.jsx)(pt.Z,{pagination:!1,showHeader:!1,dataSource:t,columns:Gt,_nk:"".concat(x,"51")})})})}),(0,e.jsxs)(E.Z,{gutter:[24,24],_nk:"".concat(x,"22"),children:[(0,e.jsx)(I.Z,{span:12,_nk:"".concat(x,"32"),children:(0,e.jsx)(W.Z,{title:"\u547D\u4EE4\u7EDF\u8BA1",className:M().card,_nk:"".concat(x,"42"),children:(0,e.jsx)(Rt,{hasLegend:!0,data:Z,height:320,lineWidth:4,_nk:"".concat(x,"61")})})}),(0,e.jsx)(I.Z,{span:12,_nk:"".concat(x,"33"),children:(0,e.jsx)(W.Z,{title:"\u5185\u5B58\u4FE1\u606F",className:M().card,_nk:"".concat(x,"43"),children:(0,e.jsx)(Zt,{title:v,height:320,percent:o,formatter:Mt,_nk:"".concat(x,"71")})})})]})]})},Ot=Ut}}]);
